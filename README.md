## ‚úä Rock ‚úã Paper ‚úåÔ∏è Scissors | MPC - coSNARKs

This project implements the game of rock-paper-scissors in the Circom language, employing advanced principles of cryptography such as zero-knowledge proofs and multi-party computation. The application allows players to participate without revealing their choices, using homomorphic encryption or a shared secret scheme to keep the moves private. This implementation demonstrates how the fundamentals of cryptography can be applied to games and other interactive applications in a secure and trustworthy manner.

## üéØ Our Contribution

Our contribution is based on the implementation of the circuit for the rock-paper-scissors game `rps.circom`, in which we explore two innovative approaches:

1. **Implementing coSNARKs with co-circom**: Leveraging *Collaborative SNARKs* (coSNARKs), a 2021 innovation that merges the strengths of Multi-Party Computation (MPC) and zkSNARKs. This technology allows multiple parties, even if they do not trust each other, to collaborate to generate a zero-knowledge proof (ZKP) that guarantees the veracity of the computation without revealing each party's private inputs. Using [*co-circom* from TACEO](https://github.com/TaceoLabs/co-snarks), a tool that allows creating coSNARKs with circuits defined in Circom. Thus, coCircom expands the potential of zkSNARKs by providing collaborative proofs between multiple parties that protect data privacy and simplify verification.

2. **Integration of Circom templates with homomorphic encryption**: Integrate new efficient templates into Circom that allow encrypting plays and operating with this encrypted data within circuits. Using homomorphic encryption, plays remain private during operations, ensuring that each player's sensitive information is protected at all times.

3. **Educational and explanatory approach**: Highlight a strong educational approach, detailing each step of the process, from creating proofs in Circom and coSNARKs to developing smart contracts in Solidity. The game logic is supported by the `Verifier.sol` contract generated by *snarkjs*, which is integrated into Solidity to verify the validity of the proofs and manage the game safely and reliably on the blockchain.

This project addresses the challenge of computing on shared private data without relying on trusted third parties, providing a solution for creating private, verifiable and efficient proofs.

## ‚úÖ Prerequisites

To get started with this project, make sure you have the following installed:

- [**Node.js**](https://nodejs.org/en/download/package-manager): Required to run JavaScript-based tools and scripts.
- [**Circom**](https://docs.circom.io/getting-started/installation/): Needed to define and compile zkSNARK circuits.
- [**Snarkjs**](https://www.npmjs.com/package/snarkjs): Used to generate and verify zkSNARK proofs, as well as to create verifier contracts in Solidity.

Please ensure each of these dependencies is installed and properly configured before proceeding.

## üìù Documentation

This section describes each step in detail to make it easier to follow and contribute to the development of the project. Make sure to follow the steps in order and review each instruction before continuing.

### Step 1: Initial Setup and Dependencies
1. **Clone the repository:**
    ```bash
    git clone https://github.com/TaceoLabs/co-circom.git
    ```

2. **Install Circomlib**
The circuit `rps.circom` is already created, but to compile it correctly, we need to install the **circomlib** library. This library includes helper functions that are used in this project for example `comparators.circom`:
   ```circom
   include "../node_modules/circomlib/circuits/comparators.circom";
   ```
    To install the circomlib dependency, run the following command in the root of your project:
    ```bash
    npm install #circomlib
    ```
### Step 2: Creating the R1CS and Witness

<img src="assets/circom-snarkjs.png" alt="circom-snarkjs" width="300" height="200"/>

In this step, we will build a zkSNARK **R1CS (Rank-1 Constraint System)** for the circuit `rps.circom`. The R1CS is an arithmetic representation of the circuit, which is used to define the constraints needed to verify a statement without revealing information about the inputs. This system is based on a series of multiplications and additions in a finite field defined in circom, which represent the operations performed in the circuit. For the circuit `rps.circom`, the R1CS will allow to analyze all the components needed for the arithmetization of a prover's statement.

> Make sure you are located in the /circuits path
```bash 
circom rps.circom --inspect # inspect code (errors, warnings) 
circom rps.circom --r1cs --wasm --sym --json # compile (sym - signals) 
snarkjs r1cs info rps.r1cs # info (curve, qty. constraints and inputs...) 
snarkjs r1cs print rps.r1cs rps.sym # show constraints with signals 
snarkjs r1cs export json rps.r1cs rps.r1cs.json # better reading of r1cs (see mapping against .sym)
```

# Resources
- [Circom Documentation](https://docs.circom.io/getting-started/installation/)
- [Explanatory video of the RPS circuit](https://youtu.be/AWA107F2uDQ)